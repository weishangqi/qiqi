import{r as u,af as k,l as E,w as t,o as U,d as e,e as w,bY as x,aj as i}from"./index-Cx8TPHbv.js";import{E as y,a as B}from"./el-form-item-BYOAxJaE.js";import{E as F}from"./el-button-CLRQyoNK.js";import{E as I}from"./el-input-CTaxJvgn.js";import{_ as S}from"./PageContainer-DdcoL8pY.js";import"./use-form-item-2p89PICZ.js";import"./_baseClone-XL7m3LQ2.js";import"./_Uint8Array-BdXzh2eh.js";import"./index-B7a9eqTr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={__name:"UserProfile",setup(q){const n=u(),{user:{email:d,id:p,nickname:f,username:_},getUser:c}=k(),a=u({id:p,username:_,nickname:f,email:d}),g=u({nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{pattern:/^\S{2,10}/,message:"昵称长度在2-10个非空字符",trigger:"blur"}],email:[{required:!0,message:"请输入用户邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:["blur","change"]}]}),b=async()=>{await n.value.validate();const o=await x(a.value);if(o.data.code===200)c(),i.success("修改成功");else{if(o.data.code===401)return;i.error(o.data.msg)}};return(o,l)=>{const s=I,m=y,v=F,V=B;return U(),E(S,{title:"基本资料"},{default:t(()=>[e(V,{ref_key:"formRef",ref:n,model:a.value,rules:g.value,"label-width":"100px"},{default:t(()=>[e(m,{label:"登录名称"},{default:t(()=>[e(s,{modelValue:a.value.username,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.username=r),disabled:""},null,8,["modelValue"])]),_:1}),e(m,{label:"用户昵称",prop:"nickname"},{default:t(()=>[e(s,{modelValue:a.value.nickname,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.nickname=r)},null,8,["modelValue"])]),_:1}),e(m,{label:"用户邮箱",prop:"email"},{default:t(()=>[e(s,{modelValue:a.value.email,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value.email=r)},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(v,{type:"primary",onClick:b},{default:t(()=>l[3]||(l[3]=[w("提交修改")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}};export{D as default};
