import{r as g,af as $,k as q,l as _,o as w,w as l,d as a,b as v,u as d,ag as b,ah as c,e as t,ai as I,aj as x,ak as L,al as N}from"./index-Cx8TPHbv.js";import{E as P,a as z}from"./el-col-f3pmZj-z.js";import{E as F}from"./el-checkbox-ChUEizep.js";import{E as M,a as T}from"./el-form-item-BYOAxJaE.js";import{E as j}from"./el-link-BlECjB0s.js";import{E as D}from"./el-button-CLRQyoNK.js";import{E as A}from"./el-input-CTaxJvgn.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-2p89PICZ.js";import"./isEqual-CfdEZOFL.js";import"./_Uint8Array-BdXzh2eh.js";import"./_baseClone-XL7m3LQ2.js";import"./index-B7a9eqTr.js";const H={class:"flex"},J={__name:"loginPage",setup(K){const u=g(!1),i=g(),o=g({username:"",password:"",repassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"用户名必须是 2-10位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"},{validator:(m,e,n)=>{e!==o.value.password?n(new Error("两次输入密码不一致")):n()},trigger:"blur"}]},U=async()=>{await i.value.validate(),await I(o.value),x.success("注册成功"),u.value=!1},k=$(),C=L(),S=async()=>{await i.value.validate();const m=new URLSearchParams({username:o.value.username,password:o.value.password}),e=await N(m);e.data.code===200?(k.setToken(e.data.data),k.getUser(),x.success("登录成功"),C.push("/")):x.error(e.data.msg)};return q(u,()=>{o.value={username:"",password:"",repassword:""}}),(m,e)=>{const n=P,r=M,p=A,y=D,f=j,E=T,R=F,B=z;return w(),_(B,{class:"login-page"},{default:l(()=>[a(n,{span:12,class:"bg"}),a(n,{span:6,offset:3,class:"form"},{default:l(()=>[u.value?(w(),_(E,{key:0,model:o.value,rules:V,ref_key:"form",ref:i,size:"large",autocomplete:"off"},{default:l(()=>[a(r,null,{default:l(()=>e[7]||(e[7]=[v("h1",null,"注册",-1)])),_:1}),a(r,{prop:"username"},{default:l(()=>[a(p,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.username=s),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"password"},{default:l(()=>[a(p,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.password=s),"prefix-icon":d(c),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"repassword"},{default:l(()=>[a(p,{modelValue:o.value.repassword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.repassword=s),"prefix-icon":d(c),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,null,{default:l(()=>[a(y,{onClick:U,class:"button",type:"primary","auto-insert-space":""},{default:l(()=>e[8]||(e[8]=[t(" 注册 ")])),_:1})]),_:1}),a(r,{class:"flex"},{default:l(()=>[a(f,{type:"info",underline:!1,onClick:e[3]||(e[3]=s=>u.value=!1)},{default:l(()=>e[9]||(e[9]=[t(" ← 返回 ")])),_:1})]),_:1})]),_:1},8,["model"])):(w(),_(E,{key:1,model:o.value,rules:V,ref_key:"form",ref:i,size:"large",autocomplete:"off"},{default:l(()=>[a(r,null,{default:l(()=>e[10]||(e[10]=[v("h1",null,"登录",-1)])),_:1}),a(r,{prop:"username"},{default:l(()=>[a(p,{modelValue:o.value.username,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.username=s),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{prop:"password"},{default:l(()=>[a(p,{modelValue:o.value.password,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.password=s),name:"password","prefix-icon":d(c),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(r,{class:"flex"},{default:l(()=>[v("div",H,[a(R,null,{default:l(()=>e[11]||(e[11]=[t("记住我")])),_:1}),a(f,{type:"primary",underline:!1},{default:l(()=>e[12]||(e[12]=[t("忘记密码？")])),_:1})])]),_:1}),a(r,null,{default:l(()=>[a(y,{onClick:S,class:"button",type:"primary","auto-insert-space":""},{default:l(()=>e[13]||(e[13]=[t("登录")])),_:1})]),_:1}),a(r,{class:"flex"},{default:l(()=>[a(f,{type:"info",underline:!1,onClick:e[6]||(e[6]=s=>u.value=!0)},{default:l(()=>e[14]||(e[14]=[t(" 注册 → ")])),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},te=G(J,[["__scopeId","data-v-93f44a8d"]]);export{te as default};
