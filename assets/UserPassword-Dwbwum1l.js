import{_ as V}from"./PageContainer-DdcoL8pY.js";import{r as n,af as k,l as x,w as l,o as U,d as o,e as _,ak as F,c9 as S,aj as y}from"./index-Cx8TPHbv.js";import{E as C,a as N}from"./el-col-f3pmZj-z.js";import{E as P,a as R}from"./el-form-item-BYOAxJaE.js";import{E as q}from"./el-button-CLRQyoNK.js";import{E as B}from"./el-input-CTaxJvgn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-2p89PICZ.js";import"./_baseClone-XL7m3LQ2.js";import"./_Uint8Array-BdXzh2eh.js";import"./index-B7a9eqTr.js";const Q={__name:"UserPassword",setup(A){const u=n(),r=n({old_pwd:"",new_pwd:"",re_pwd:""}),i=n({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"原密码长度在6-15位之间",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"新密码长度在6-15位之间",trigger:"blur"},{validator:(m,e,t)=>{e===r.value.old_pwd?t(new Error("新密码不能与原密码一样")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"确认密码长度在6-15位之间",trigger:"blur"},{validator:(m,e,t)=>{e!==r.value.new_pwd?t(new Error("确认密码必须和新密码一样")):t()},trigger:"blur"}]}),d=k(),w=F(),f=async()=>{await u.value.validate(),await S(r.value),y.success("密码修改成功"),d.setToken(""),d.setUser({}),w.push("/login")},c=()=>{u.value.resetFields()};return(m,e)=>{const t=B,a=P,p=q,g=R,v=C,E=N,b=V;return U(),x(b,{title:"修改密码"},{default:l(()=>[o(E,null,{default:l(()=>[o(v,{span:12},{default:l(()=>[o(g,{ref_key:"formRef",ref:u,model:r.value,rules:i.value,"label-width":"100px"},{default:l(()=>[o(a,{label:"原密码",prop:"old_pwd"},{default:l(()=>[o(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.old_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,{label:"新密码",prop:"new_pwd"},{default:l(()=>[o(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.new_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,{label:"确认密码",prop:"re_pwd"},{default:l(()=>[o(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.re_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,null,{default:l(()=>[o(p,{type:"primary",onClick:f},{default:l(()=>e[3]||(e[3]=[_("修改密码")])),_:1}),o(p,{onClick:c},{default:l(()=>e[4]||(e[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}};export{Q as default};
